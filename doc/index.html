<html>
<head>
<title>mod_parp</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="author" content="Christian Liesch, Pascal Buchbinder">
<style TYPE="text/css">
<!--  
  body {
	background-color: white;
	color: black;
	font-family: monospace;
	font-weight: normal;
	text-align: left;
  }
  a:link    { color: rgb(95,10,15); }
  a:visited { color:black; }
  a:focus   { color:black; text-decoration:underline; }
  a:hover   { color:black; text-decoration:none; }
  a:active  { color:black; text-decoration:underline; }
-->
</style>
</head>
<body>
&nbsp;&nbsp;____&nbsp;&nbsp;_____&nbsp;&nbsp;____&nbsp;____&nbsp;&nbsp;<br>
&nbsp;|H&nbsp;_&nbsp;\(____&nbsp;|/&nbsp;___)&nbsp;&nbsp;_&nbsp;\&nbsp;<br>
&nbsp;|T|_|&nbsp;/&nbsp;___&nbsp;|&nbsp;|&nbsp;&nbsp;&nbsp;|&nbsp;|_|&nbsp;|<br>
&nbsp;|T&nbsp;__/\_____|_|&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;__/&nbsp;<br>
&nbsp;|P|ParameterParser|_|&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;http://parp.sourceforge.net<br>
&nbsp; 
<table>
<tbody>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>
<p>
mod_parp is HTTP request parameter parser. It processes the request message body 
as well as the query portion of the request URL. The module parsed this data and 
provides all parameter to other Apache modules by a table of name/value pairs.
</p>
<p>
Activation:<br>
The module is activated by setting the "parp" key in either the request notes table (r-&gt;notes) or in the environment variables table (r-&gt;subprocess_env). mod_parp probes for the "parp" variable at the header parser hook right after the Apache module mod_setenvif. You may set "parp" by our own module or by using mod_setenvif.
<table border="0" cellspacing="5" cellpadding="10" width="100%">
<tr><td bgcolor="#EBE5E0">
<pre>
# load the module into your server:
LoadModule parp_module &lt;path to module&gt;/mod_parp.so

# activate mod_parp for all requests matching the URL /a /b but not
# the URL /a/upload
SetEnvIf   Request_URI   ^/a.*            parp
SetEnvIf   Request_URI   ^/a/upload.*    !parp
SetEnvIf   Request_URI   ^/b.*            parp
</pre>
</td></tr>
</table>
</p>

<p>
Error handling:<br>
mod_parp denies request on parsing errors by default. The default return code is 500. You may override this return code using the directive "PARP_ExitOnError &lt;code&gt;". Set the code 200 to ignore erros.
<table border="0" cellspacing="5" cellpadding="10" width="100%">
<tr><td bgcolor="#EBE5E0">
<pre>
# ignore parser errors:
PARP_ExitOnError         200
</pre>
</td></tr>
</table>
</p>

<p>
Memory handling:<br>
mod_parp stores the whole request message body in the servers memory. Use the "LimitRequestBody" directive to limit the maximum data size.
</p>


<p>
API:<br>
The table storing the request data my be accessed using an optional function or by registering a callback (hook) to mod_parp.
<table border="0" cellspacing="5" cellpadding="10" width="100%">
<tr><td bgcolor="#EBE5E0">
<pre>
# optional function sample code:
extern module AP_MODULE_DECLARE_DATA parp_module;
static APR_OPTIONAL_FN_TYPE(parp_hp_table) *parp_appl_hp_table = NULL;

static int parp_appl_handler(request_rec * r) {
  ...
  parp_appl_hp_table = APR_RETRIEVE_OPTIONAL_FN(parp_hp_table);
  tl = parp_appl_hp_table(r);
  if(tl) {
    int i;
    apr_table_entry_t *e = (apr_table_entry_t *) apr_table_elts(tl)->elts;
    for (i = 0; i < apr_table_elts(tl)->nelts; ++i) {
      ap_rprintf(r, "of: %s = %s\n",
                 ap_escape_html(r->pool, e[i].key),
                 ap_escape_html(r->pool, e[i].val));
    }
  }
  ...

# hook:
</pre>
</td></tr>
</table>
</p>

<p>
mod_parp is available at <a href="http://sourceforge.net/projects/parp/">SourceForge.net</a> 
under the <a href="LICENSE.txt">Apache License Version 2.0</a>.
</p>

</td></tr>
</tbody>
</table>
<hr>
<a href="http://sourceforge.net/projects/parp/"><img align="right" src="http://sflogo.sourceforge.net/sflogo.php?group_id=230159&amp;type=1" width="88" height="31" border="0" alt="parp at SourceForge.net" /></a>
<SMALL><SMALL>&copy; 2008, PARP</SMALL></SMALL>
</body>
</html>
